<div class="relative inline-block">
  <div class="relative flex h-9 items-center rounded-full bg-slate-200 p-1 dark:bg-slate-800">
    <div id="theme-slider" class="absolute h-7 w-7 rounded-full bg-white transition-transform duration-200 ease-out dark:bg-slate-600 shadow-sm"></div>
    <button onclick="updateTheme('system', 0)" class="relative z-10 flex h-7 w-7 items-center justify-center text-slate-500 transition-colors hover:text-slate-900 dark:hover:text-white" title="System">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25" /></svg>
    </button>
    <button onclick="updateTheme('light', 1)" class="relative z-10 flex h-7 w-7 items-center justify-center text-slate-500 transition-colors hover:text-slate-900 dark:hover:text-white" title="Light">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" /></svg>
    </button>
    <button onclick="updateTheme('dark', 2)" class="relative z-10 flex h-7 w-7 items-center justify-center text-slate-500 transition-colors hover:text-slate-900 dark:hover:text-white" title="Dark">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" /></svg>
    </button>
  </div>
  <script>
    (function () {
      const s = document.getElementById("theme-slider");
      window.updateTheme = (m, i) => {
        const root = document.documentElement; localStorage.setItem("theme", m);
        const isD = m === "dark" || (m === "system" && window.matchMedia("(prefers-color-scheme: dark)").matches);
        root.classList.toggle("dark", isD);
        if (s) s.style.transform = `translateX(${i * 28}px)`;
      };
      const cur = localStorage.getItem("theme") || "system";
      const idx = { system: 0, light: 1, dark: 2 }; updateTheme(cur, idx[cur]);
    })();
  </script>
</div>